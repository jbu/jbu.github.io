<!doctype html><html lang=en-us><head><title>Lets Run Science Part Iota | Dr James Uther</title><meta charset=utf-8><meta name=language content="en"><meta name=description content><meta name=keywords content><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lets Run Science Part Iota"><meta name=twitter:description content><meta name=twitter:site content="https://twitter.com/hemul"><meta name=twitter:creator content="https://twitter.com/hemul"><link rel="shortcut icon" type=image/png href=/favicon.ico><link type=text/css rel=stylesheet href=/css/post.min.86d1effd4c412b85ac13db53a90c473a0f256f789b821e131125c9aa25cb6a6d.css integrity="sha256-htHv/UxBK4WsE9tTqQxHOg8lb3ibgh4TESXJqiXLam0="><link type=text/css rel=stylesheet href=/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU="><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/uther.wtf"},"articleSection":"blog","name":"Lets Run Science Part Iota","headline":"Lets Run Science Part Iota","description":"","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2015","datePublished":"2015-03-31 00:00:00 \u002b0000 UTC","dateModified":"2015-03-31 00:00:00 \u002b0000 UTC","url":"https:\/\/uther.wtf\/blog\/lets-run-science-part-iota\/","wordCount":"621","keywords":["Blog"]}</script></head><body><div class=burger__container><div class=burger aria-controls=navigation aria-label=Menu><div class="burger__meat burger__meat--1"></div><div class="burger__meat burger__meat--2"></div><div class="burger__meat burger__meat--3"></div></div></div><nav class=nav id=navigation><ul class=nav__list><li><a href=/>about</a></li><li><a class=active href=/blog>blog</a></li><li><a href=/cv>CV</a></li></ul></nav><main><div class=flex-wrapper><div class=post__container><div class=post><header class=post__header><h1 id=post__title>Lets Run Science Part Iota</h1><time datetime="2015-03-31 00:00:00 +0000 UTC" class=post__date>2015-03-31</time></header><article class=post__content><p>In our <a href=lets-run-science.md>last jaunt</a>, we had a look at code that take all the various measurements of temperature that have been taken over the last few hundred years, and pull them together into something we can usefully run stats on. The headline finding of all this is that on average, the planet has warmed over time. But why? To answer that, we need a model to play with.</p><p>A climate model (or <a href=http://www.ipcc-data.org/guidelines/pages/gcm_guide.html target=_blank rel="noreferrer noopener">general circulation model</a>) attempts to model the physical processes of the earths climate. With one of these you can poke around and see what factors might be causing any changes we’re seeing. For instance, are changes in the sun causing the warming? Try running the model with constant sun and see if the temperature rise goes away. It doesn’t? Well, it’s not the sun. The tl;dr about the models is that:</p><ol><li>They model the observed climate well (and are constantly getting better)</li><li>The observed warming is only replicated if you take the increase in human-generated CO2 into account.
We’re not going to get as far as showing that in this post because I’m short on supercomputers here, but let’s at least poke around with the technology.</li></ol><p>Since I’m already playing around in the <a href=http://www.giss.nasa.gov/ target=_blank rel="noreferrer noopener">GISS</a> website, let’s see what we can dig out. For the joy of dusting off important historic technology, <a href=http://www.giss.nasa.gov/tools/modelii/ target=_blank rel="noreferrer noopener">Model II</a> would have been the one to pick, but it’s moved onto other pastures, and a quick check leaves me unsure if I have the appropriate compiler. So let’s try their current workhorse, [ModelE])(<a href=http://www.giss.nasa.gov/tools/modelE/%29 target=_blank rel="noreferrer noopener">http://www.giss.nasa.gov/tools/modelE/)</a>.</p><p>To keep things sane, I’ve set up a gist <a href=https://gist.github.com/jbu/ca44dbea0f72e77e627b target=_blank rel="noreferrer noopener">here</a> with scripts to build docker containers etc. You can run it with</p><pre><code class=language-bash>$ curl https://gist.githubusercontent.com/jbu/ca44dbea0f72e77e627b/raw/modele.sh | bash
# cd modelE
# ./run.sh
</code></pre><p>Which should run ModelE, with completely generic parameters, from 1949/12/1 to 1950/12/2. It takes a while!</p><p>We end up with output in <code>/modelE/decks/my_run</code>. Given the length of the run there’s not much fun to be had here, so I won’t try drawing any 1-point graphs or anything. But if you’re interested there are tools for working with the output, documented in the HOWTO <a href=https://github.com/addinall/GISS_climate_model/blob/master/doc/HOWTO.html#L1315 target=_blank rel="noreferrer noopener">here</a>.</p><p>If you want to try something more historic, <code>/modelE/templates/E_AR5_NINT_oR.R</code> is one of the the rundecks for the <a href=http://data.giss.nasa.gov/modelE/ar5/ target=_blank rel="noreferrer noopener">CIMP5 runs</a>.</p><p>So, a few random observations about getting modelE going. It’s quite well documented! (see the <code>/modelE/docs</code> directory). <code>HOWTO.html</code> is a comprehensive guide that I’m sure a new post-grad at the group would be relieved to see.</p><p>It mostly consists modules (fortan) that can be assembled to configure a particular model. The general work cycle seems to be to think of a way to model something (say, the albedo of surf on the sea, or clouds, or vegetation), write a module, and write a paper about how you modelled it and the effect it had (academic publications are the real documentation here). There are also publications about how particular runs were configured, listing modules used and the initial conditions (<a href=http://pubs.giss.nasa.gov/docs/2014/2014_Schmidt_etal_3.pdf target=_blank rel="noreferrer noopener">example</a>).</p><p>The codebase has obviously been around for a while, so has vestigial traces of a number of generations of high performance computing libraries (libMP, MPI, etc) and the refactors between them are not complete, but it all seems well described. But what really strikes me is the ‘liveness’ of the code. It’s obviously been worked on heavily for decades, through a bunch of technology generations, with multiple owners and different team sizes, different thoughts on source code management, modularisation, and even languages (although fortran obviously is not going anywhere in this space). And a the end of it all, it is sensibly modularised, scales well, uses revision control well, has good documentation and from there looks like it has reasonable hackability. This almost never happens. I’m quietly impressed!</p><p>(<a href=http://web.archive.org/web/20161006164942/http://www.lshift.net/blog/2015/03/31/lets-run-science-part-iota/ target=_blank rel="noreferrer noopener">http://web.archive.org/web/20161006164942/http://www.lshift.net/blog/2015/03/31/lets-run-science-part-iota/</a>)</p></article><div class=pagination><a class=pagination__item href=https://uther.wtf/blog/open-nhs-data/><span class=pagination__label>Previous Post</span>
<span class=pagination__title>Playing with open NHS data, and a rant</span></a>
<a class=pagination__item href=https://uther.wtf/blog/lets-run-science/><span class=pagination__label>Next Post</span>
<span class=pagination__title>Lets Run Science</span></a></div><footer class=post__footer><div class=social-icons><a class=social-icons__link title=Twitter href=https://twitter.com/hemul target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://uther.wtf/svg/twitter.svg)></div></a><a class=social-icons__link title=GitHub href=https://github.com/jbu target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://uther.wtf/svg/github.svg)></div></a><a class=social-icons__link title=Email href=mailto:j@uther.wtf target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://uther.wtf/svg/email.svg)></div></a><a class=social-icons__link title=LinkedIn href=https://www.linkedin.com/in/jamesuther/ target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://uther.wtf/svg/linkedin.svg)></div></a></div><p>© 2022</p></footer></div></div></div></main><script src=/js/index.min.301a8b0870381bf76b3b5182e8966d363a0474281183439beb024d8b8228fc66.js integrity="sha256-MBqLCHA4G/drO1GC6JZtNjoEdCgRg0Ob6wJNi4Io/GY=" crossorigin=anonymous></script>
<script src=https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js></script>
<script src=https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js data-autoloader-path=https://unpkg.com/prismjs@1.20.0/components/></script></body></html>